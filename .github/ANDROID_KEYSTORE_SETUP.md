# ๐ Android Keystore Setup Guide

## ๐ **Overview**

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฅูุดุงุก Android Keystore ููุชูููุน ุงูุขูู ูู APK files ููุดุฑูุง ุนูู Google Play Store.

## ๐ฏ **ูุง ุณุชุญุชุงุฌู**

- โ Java Development Kit (JDK) ูุซุจุช
- โ ูุนูููุงุช ุดุฎุตูุฉ/ุดุฑูุฉ ููุดูุงุฏุฉ
- โ ุฅุตุฏุงุฑุงุช ูุฎุชููุฉ ูู ุงูุชุทุจูู (debug/release)
- โ GitHub repository access

## ๐ง **ุฎุทูุงุช ุฅูุดุงุก Keystore**

### **ุงููุฑุญูุฉ 1: ุฅูุดุงุก Keystore File**

#### **1.1 ุงุณุชุฎุฏุงู keytool (ุงูุทุฑููุฉ ุงููููุตู ุจูุง):**

```bash
# ุงูุชูู ุฅูู ูุฌูุฏ ููุงุณุจ
cd ~/Desktop

# ุฅูุดุงุก keystore ุฌุฏูุฏ
keytool -genkey -v -keystore sera-release-key.keystore \
  -alias sera-key-alias \
  -keyalg RSA \
  -keysize 2048 \
  -validity 10000
```

#### **1.2 ูุนูููุงุช ูุทููุจุฉ ุฃุซูุงุก ุงูุฅูุดุงุก:**

```bash
# ุณูุทูุจ ููู ุงููุนูููุงุช ุงูุชุงููุฉ:
Enter keystore password: [ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุฉ - ุงุญูุธูุง!]
Re-enter new password: [ุฃุนุฏ ูุชุงุจุฉ ูููุฉ ุงููุฑูุฑ]

What is your first and last name?
  [Unknown]: Abdullah Al Maimoun

What is the name of your organizational unit?
  [Unknown]: SERA Development Team

What is the name of your organization?
  [Unknown]: SERA Company

What is the name of your City or Locality?
  [Unknown]: Riyadh

What is the name of your State or Province?
  [Unknown]: Riyadh Province

What is the two-letter country code for this unit?
  [Unknown]: SA

Is CN=Abdullah Al Maimoun, OU=SERA Development Team, O=SERA Company, L=Riyadh, ST=Riyadh Province, C=SA correct?
  [no]: yes

# ูููุฉ ูุฑูุฑ ููู key (ูููู ุฃู ุชููู ููุณ ูููุฉ ูุฑูุฑ keystore)
Enter key password for <sera-key-alias>
        (RETURN if same as keystore password): [ุงุถุบุท Enter ุฃู ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุตูุฉ]
```

#### **1.3 ุงูุชุญูู ูู ุฅูุดุงุก Keystore:**

```bash
# ุงูุชุญูู ูู ุงูููู ุงููููุดุฃ
ls -la sera-release-key.keystore

# ุงูุชุญูู ูู ูุญุชููุงุช keystore
keytool -list -v -keystore sera-release-key.keystore
```

### **ุงููุฑุญูุฉ 2: ุชุญููู Keystore ุฅูู Base64**

#### **2.1 ุชุญููู ุงูููู ูู GitHub Secrets:**

```bash
# macOS/Linux:
base64 -i sera-release-key.keystore | pbcopy

# ุฃู ุญูุธู ูู ููู:
base64 -i sera-release-key.keystore > sera-keystore-base64.txt

# Windows (PowerShell):
[Convert]::ToBase64String([IO.File]::ReadAllBytes("sera-release-key.keystore")) | Set-Clipboard

# Linux (ุฅุฐุง pbcopy ุบูุฑ ูุชููุฑ):
base64 sera-release-key.keystore | xclip -selection clipboard
```

#### **2.2 ุญูุธ ุงููุนูููุงุช ุจุฃูุงู:**

```bash
# ุงุญูุธ ูุฐู ุงููุนูููุงุช ูู ููุงู ุขูู:
Keystore Password: [ูููุฉ ูุฑูุฑ keystore]
Key Alias: sera-key-alias
Key Password: [ูููุฉ ูุฑูุฑ key]
Keystore Base64: [ุงููุต ุงูููุญูู ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ]
```

### **ุงููุฑุญูุฉ 3: ุฅุถุงูุฉ Secrets ุฅูู GitHub**

#### **3.1 ูุชุญ GitHub Repository Settings:**

```bash
# ุงุฐูุจ ุฅูู ูุณุชูุฏุน GitHub:
https://github.com/YOUR_USERNAME/sera-mobile-react

# Navigate to:
Repository โ Settings โ Secrets and variables โ Actions
```

#### **3.2 ุฅุถุงูุฉ Android Keystore Secrets:**

**ุฃ. ุฅุถุงูุฉ Keystore Base64:**

```bash
Secret name: ANDROID_KEYSTORE
Value: [ุงููุต ุงูููุญูู base64 ูู ุงูุฎุทูุฉ 2.1]
```

**ุจ. ุฅุถุงูุฉ Keystore Password:**

```bash
Secret name: ANDROID_KEYSTORE_PASSWORD
Value: [ูููุฉ ูุฑูุฑ keystore]
```

**ุฌ. ุฅุถุงูุฉ Key Alias:**

```bash
Secret name: ANDROID_KEY_ALIAS
Value: sera-key-alias
```

**ุฏ. ุฅุถุงูุฉ Key Password:**

```bash
Secret name: ANDROID_KEY_PASSWORD
Value: [ูููุฉ ูุฑูุฑ key - ููุณ keystore ุฅุฐุง ูู ุชุฎุชุฑ ูููุตูุฉ]
```

### **ุงููุฑุญูุฉ 4: ุชูููู Gradle ููุชูููุน**

#### **4.1 ุฅูุดุงุก signing config ูู build.gradle:**

```bash
# ุชุญุฏูุซ android/app/build.gradle
# ุฃุถู ูุฐุง ุงููุณู ูุจู android {}:

def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

android {
    ...

    signingConfigs {
        release {
            keyAlias keystoreProperties['keyAlias'] ?: System.getenv('KEY_ALIAS')
            keyPassword keystoreProperties['keyPassword'] ?: System.getenv('KEY_PASSWORD')
            storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null
            storePassword keystoreProperties['storePassword'] ?: System.getenv('KEYSTORE_PASSWORD')
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }
}
```

#### **4.2 ุฅูุดุงุก key.properties ููุชุทููุฑ ุงููุญูู:**

```bash
# ุฅูุดุงุก android/key.properties (ูุง ุชุถุนู ูู Git!)
storePassword=YOUR_KEYSTORE_PASSWORD
keyPassword=YOUR_KEY_PASSWORD
keyAlias=sera-key-alias
storeFile=../sera-release-key.keystore
```

#### **4.3 ุฅุถุงูุฉ key.properties ุฅูู .gitignore:**

```bash
# ุชุฃูุฏ ูู ูุฌูุฏ ูุฐุง ูู android/.gitignore:
key.properties
*.keystore
*.jks
```

### **ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ ุงูุชูููุน**

#### **5.1 ุงุฎุชุจุงุฑ ูุญูู:**

```bash
# ุงูุชูู ุฅูู ูุฌูุฏ android
cd seraApp/android

# ุชุดุบูู ุจูุงุก signed APK
./gradlew assembleRelease

# ุงูุชุญูู ูู ูุฌูุฏ APK ูููุน
ls -la app/build/outputs/apk/release/
```

#### **5.2 ุงูุชุญูู ูู ุงูุชูููุน:**

```bash
# ุงูุชุญูู ูู ุชูููุน APK
jarsigner -verify -verbose -certs app/build/outputs/apk/release/app-release.apk

# ูุนูููุงุช ููุตูุฉ ุนู ุงูุชูููุน
keytool -printcert -jarfile app/build/outputs/apk/release/app-release.apk
```

### **ุงููุฑุญูุฉ 6: ุงุฎุชุจุงุฑ GitHub Actions**

#### **6.1 ุชุดุบูู workflow:**

```bash
# ุงุฐูุจ ุฅูู GitHub Actions
# ุงุฎุชุฑ workflow ูุญุชูู ุนูู Android build
# ุชุญูู ูู logs ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุชูููุน:

# ูุฌุจ ุฃู ุชุฑู:
> Task :app:validateSigningRelease
> Task :app:assembleRelease
BUILD SUCCESSFUL
```

#### **6.2 ุชุญููู ููุญุต APK:**

```bash
# ุญูู APK ูู GitHub Actions artifacts
# ุชุญูู ูู ุงูุชูููุน ูุญููุงู:
jarsigner -verify downloaded-app-release.apk
```

## ๐ **ูุนูููุงุช ูููุฉ**

### **ุฃููุงุน Keystores:**

```bash
# Debug Keystore (ููุชุทููุฑ):
- ูููุดุฃ ุชููุงุฆูุงู ุจูุงุณุทุฉ Android Studio
- ุบูุฑ ููุงุณุจ ูููุดุฑ
- ูููุฉ ูุฑูุฑ ูุนุฑููุฉ: "android"

# Release Keystore (ููุฅูุชุงุฌ):
- ูููุดุฃ ูุฏููุงู (ูุฐุง ุงูุฏููู)
- ูุทููุจ ูููุดุฑ ุนูู Google Play
- ูููุงุช ูุฑูุฑ ูููุฉ ูุณุฑูุฉ
```

### **ุฃูููุฉ Keystore:**

```bash
# ููุงุฐุง ูุญุชุงุฌ Keystore:
- โ ุชูููุน APK ูููุดุฑ ุงูุขูู
- โ ุงูุชุญูู ูู ูููุฉ ุงููุทูุฑ
- โ ููุน ุงูุชูุงุนุจ ุจุงูุชุทุจูู
- โ ูุชุทูุจ ุฅุฌุจุงุฑู ูู Google Play Store
- โ ุชุญุฏูุซุงุช ุงูุชุทุจูู ุงููุณุชูุจููุฉ
```

### **ุญูุธ Keystore ุจุฃูุงู:**

```bash
# ุงุญุชูุงุทุงุช ุงูุฃูุงู:
- ๐พ ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ููุงู ุขูู
- ๐ ูุง ุชุดุงุฑู ูููุงุช ุงููุฑูุฑ
- ๐ ุงุญูุธ ูุนูููุงุช keystore ูููุตูุฉ
- ๐ซ ูุง ุชุถุน keystore ูู Git
- โ๏ธ  ุงุญูุธ ูุณุฎุฉ ูู cloud storage ูุดูุฑ
```

## ๐จ **ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง**

### **1. ุฎุทุฃ "keytool not found":**

```bash
# ุงูุญู - ุชุฃูุฏ ูู ุชุซุจูุช JDK:
# macOS:
brew install openjdk

# Windows:
# ุญูู JDK ูู Oracle ุฃู OpenJDK
# ุฃุถู ุฅูู PATH: C:\Program Files\Java\jdk-XX\bin

# Linux:
sudo apt install openjdk-11-jdk
```

### **2. ุฎุทุฃ "Wrong keystore password":**

```bash
# ุงูุญู:
1. ุชุฃูุฏ ูู ูููุฉ ุงููุฑูุฑ ุงูุตุญูุญุฉ
2. ุชุญูู ูู GitHub Secrets
3. ุฃุนุฏ ุฅูุดุงุก keystore ุฅุฐุง ูุณูุช ูููุฉ ุงููุฑูุฑ
```

### **3. ุฎุทุฃ "Key alias not found":**

```bash
# ุงูุญู:
1. ุชุญูู ูู alias name ูู GitHub Secrets
2. ุงุณุชุฎุฏู keytool -list ูุนุฑุถ aliases
3. ุชุฃูุฏ ูู ุชุทุงุจู ุงูุฃุณูุงุก ุจุฏูุฉ
```

### **4. ูุดู ูู CI/CD signing:**

```bash
# ุงูุญู:
1. ุชุญูู ูู base64 conversion ุตุญูุญ
2. ุชุฃูุฏ ูู ุฌููุน secrets ููุฌูุฏุฉ
3. ุชุญูู ูู build.gradle configuration
4. ุฑุงุฌุน GitHub Actions logs
```

## โ **Checklist ููุชุญูู ุงูููุงุฆู**

- [ ] โ Java JDK installed
- [ ] โ Keystore created with keytool
- [ ] โ Keystore information documented safely
- [ ] โ Base64 conversion completed
- [ ] โ GitHub Secrets added:
  - [ ] ANDROID_KEYSTORE
  - [ ] ANDROID_KEYSTORE_PASSWORD
  - [ ] ANDROID_KEY_ALIAS
  - [ ] ANDROID_KEY_PASSWORD
- [ ] โ build.gradle configured
- [ ] โ key.properties created (and gitignored)
- [ ] โ Local signing tested
- [ ] โ CI/CD signing tested
- [ ] โ Backup keystore saved securely

## ๐ฏ **ุฃูุถู ุงูููุงุฑุณุงุช**

### **ุฃูุงู Keystore:**

```bash
# ุงูุชูุตูุงุช:
1. ๐ ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ (12+ characters)
2. ๐พ ุงุญูุธ ูุณุฎ ุงุญุชูุงุทูุฉ ูุชุนุฏุฏุฉ
3. ๐ ูุซู ูุนูููุงุช keystore ุจุฃูุงู
4. ๐ ุฏูุฑ ูููุงุช ุงููุฑูุฑ ุฏูุฑูุงู
5. ๐ฅ ููุฏ ุงููุตูู ูููุฑูู ุงููุฎูู ููุท
```

### **ุฅุฏุงุฑุฉ Keystores:**

```bash
# ูููุดุงุฑูุน ุงููุจูุฑุฉ:
1. ๐ข ุงุณุชุฎุฏู keystore ูููุตู ููู environment
2. ๐ ูุซู ุฌููุน keystores ูุชูุงุฑูุฎ ุงูุชูุงุฆูุง
3. ๐ ุฎุทุท ูุชุฌุฏูุฏ keystores ูุจู ุงูุชูุงุฆูุง
4. ๐งช ุงุฎุชุจุฑ ุนูููุฉ signing ุจุงูุชุธุงู
5. ๐ ุฃูุดุฆ SOP ูุฅุฏุงุฑุฉ keystores
```

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ**

ุจุนุฏ ุฅูุดุงุก Keystore:

1. **ุงุฎุชุจุฑ signing** ูุญููุงู ููุน CI/CD
2. **ุฃุนุฏ Android App Bundle** ููู Play Store
3. **ุฃุนุฏ signing config** ูู different flavors
4. **ูุนู Play App Signing** ูู Google Play Console
5. **ูุซู ุนูููุฉ keystore management** ูููุฑูู

---

## ๐ **ุงููุณุงุนุฏุฉ ูุงูุฏุนู**

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. ุชุญูู ูู JDK installation
2. ุฑุงุฌุน error messages ูู terminal
3. ุชุญูู ูู GitHub Actions logs
4. ุชุฃูุฏ ูู file permissions
5. ุฑุงุฌุน Android documentation

**Android Developer Docs**: https://developer.android.com/studio/publish/app-signing
**keytool Documentation**: https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html
