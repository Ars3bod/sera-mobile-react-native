/*!
 * widgets
 * @version: 9.0.017.00
 * @license: Genesys Telecom Labs
 */
widgetsJsonpFunction([9],{"./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'.cx-kc-article-wrapper{height:100%}.cx-kc-article-wrapper+.cx-button-group{position:absolute;bottom:0;left:0;padding:5px 0 10px 20px;width:100%}.cx-kc-article-wrapper+.cx-button-group .btn-back{float:left}.cx-kc-article-wrapper .cx-scroll-wrapper{position:relative;overflow-y:auto;overflow-x:hidden}.cx-kc-article{font-size:.8125em}.cx-kc-article .gkc-doc-link{cursor:pointer}.cx-kc-article .cx-metadata{font-size:.85em;margin-bottom:10px}.cx-kc-article .cx-custom-fields{margin-top:10px;line-height:1.125em}.cx-kc-article .cx-kc-article-title{margin:0 0 24px;padding:0;height:auto!important;min-height:0;font-weight:700}.cx-kc-article .cx-kc-article-title .cx-icon{height:32px;width:24px;float:left}.cx-kc-article .cx-kc-article-title .cx-question-title{position:relative;left:8px}.cx-kc-article .cx-description{line-height:1.25em}.cx-kc-article .cx-description a{font-weight:700;cursor:pointer}.cx-kc-article .cx-description a .cx-icon-document-link{height:14px;width:14px;margin-right:3px;margin-top:2px;vertical-align:top;display:inline-block}.cx-kc-article .cx-description a .cx-icon-document-link svg path{fill:currentColor!important}.cx-kc-article .cx-attachments{margin-top:10px;margin-left:-3px;line-height:1.25em;overflow:hidden}.cx-kc-article .cx-attachments>div{margin:2px 3px}.cx-kc-article .cx-attachments a{font-weight:700;cursor:pointer}.cx-kc-article .cx-attachments a .cx-icon-document-attachment{height:16px;width:16px;margin-left:-4px;margin-right:8px;margin-bottom:2px;vertical-align:bottom;display:inline-block}.cx-kc-article .cx-attachments a:hover .cx-icon-document-attachment svg path,.cx-kc-article .cx-attachments a:hover .cx-icon-document-attachment svg polygon{fill:currentColor!important}.cx-kc-article .cx-feedback textarea{width:350px;resize:vertical}.cx-kc-article .cx-feedback .cx-vote-question{float:left}.cx-kc-article .cx-feedback .cx-vote-question.cx-disabled{opacity:.5}.cx-kc-article .cx-feedback .cx-vote-question a{text-decoration:none}.cx-kc-article .cx-feedback .cx-vote-question .btn{width:50px;padding:5px 0;margin-left:5px}.cx-kc-article .cx-feedback .cx-vote-question .btn-default{margin-left:13px}.cx-kc-article .cx-feedback:after{content:"";display:block;clear:both}.cx-kc-article .cx-feedback .cx-helpful{line-height:1.25em;padding-top:50px}.cx-kc-article .cx-feedback .cx-helpful span{display:block;font-size:.8125em;font-weight:700;padding:10px 0 20px}.cx-kc-article .cx-feedback .cx-publish-feedback{width:300px}.cx-kc-article .cx-feedback .cx-publish-feedback.cx-quiet{display:none}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-star-rating span{font-size:1em;cursor:pointer}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment{margin-top:5px}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment textarea{width:100%}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment .cx-publish-comment-buttons{display:none;margin-top:7px;text-align:right}.cx-webchat .gkc-question{margin-top:10px}.cx-webchat .gkc-question a{display:list-item;margin-left:16px}.cx-mobile.cx-landscape .cx-kc-article .cx-kc-article-title .cx-question-title{width:inherit}.cx-mobile .cx-kc-article-wrapper+.cx-button-group{position:fixed}',""])},"./webapp/plugins/cx-chat-deflection/cx-chat-deflection-service.js":function(e,t,n){"use strict";var a;void 0!==(a=function(){return{getWelcomeMessage:function(e){return e.WelcomeMessage},handleCustomerQuery:function(e,t,n,a){return e.command(a+".search",{query:t,junkfree:!0,apiClientMediaType:n})}}}.apply(t,[]))&&(e.exports=a)},"./webapp/plugins/cx-chat-deflection/cx-chat-deflection.js":function(e,t,n){"use strict";var a,c,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=[n("./node_modules/jquery/dist/jquery.js"),n("./webapp/lib/thirdparty/micro-template.js"),n("./webapp/plugins/cx-common/cx-common.js"),n("./webapp/plugins/cx-chat-deflection/nls/string.json"),n("./webapp/plugins/cx-chat-deflection/cx-chat-deflection-service.js"),n("./webapp/plugins/cx-chat-deflection/html/deflected-document.html"),n("./webapp/plugins/cx-chat-deflection/html/bubble.html"),n("./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less")],void 0!==(c=function(e,t,n,a,c,s,r){function o(t){if(t.type&&("CustomNotice"===t.type||"Message"===t.type)&&t.text){var n=!1;try{var c=JSON.parse(t.text),s=!1;if("object"==(void 0===c?"undefined":i(c))&&c.key)switch(c.key){case q:s=!0,t.text=c.message,y=!0;break;case C:var r,o=c.documents,d=c.query;o&&o.length>0?(r=e("<span>").addClass("cx-message-text").text(a.SearchResult).get(0).outerHTML,o.forEach((function(t){var n=e("<a>").addClass("cx-gkc-question-link").attr("href","javascript:;").attr("data-id",t.id).attr("data-kbid",t.kbId).attr("data-query",d).attr("search-id",c.searchId).text(t.question||t.title);r+=e("<div>").addClass("gkc-question").append(n).get(0).outerHTML}))):r=e("<span>").addClass("cx-message-text").text(a.NoDocumentsFound).get(0).outerHTML,s=!0,t.text=r,t.html=!0;break;case I:var l,u=c.document,p=I;if(n=!0,!u)return;if(l=e("<div>"),m.enabled){var g=e("<span>").text(a.SuggestedMessage).addClass("cx-message-text"),b=e("<a>").addClass("cx-gkc-question-link").attr("href","javascript:;").attr("data-id",u.id).attr("data-kbid",u.kbId).attr("data-key",p).text(u.question||u.title),x=e("<span>").text(" ("+a.OpenDocumentHint+")").addClass("cx-message-text");l.append(g,b,x)}else{var f=e("<span>").text(a.SuggestedDocumentMessage.replace("<%DocTitle%>",u.question||u.title));l.append(f)}s=!0,t.text=l,t.html=!0}if(s)return t.from.type="Agent",t.type="Message",t.messageType="text",n||(t.from.nickname=a.KnowledgeAgentName,t.bubble={direction:"left",time:!0,name:!0,avatar:{icon:"knowledge-center"}}),t}catch(e){return}}}function d(e){e.sessionId&&(h[m.workspace.sessionKey]=e.sessionId),e.language&&(h[m.workspace.languageKey]=e.language)}function l(e){m.enabled?(f.command("WebChatService.sendCustomNotice",{message:JSON.stringify(e)}),"readable"===m.agentTranscript&&function(e){var t,n={};switch(e.key){case C:var c=e.documents;n.data=e.query,n.template=a.SearchMessage,n.placeholder="<%SearchQuery%>",n.documents=c;break;case W:n.data=e.question,n.template=a.OpenMessage,n.placeholder="<%OpenQuery%>";break;case S:n.data=e.question,n.template=a.VisitMessage,n.placeholder="<%VisitQuery%>";break;case M:n.data=e.question,n.template=a.UnansweredMessage,n.placeholder="<%UnansweredQuery%>";break;case j:n.data=e.question,n.template=a.AnsweredMessage,n.placeholder="<%AnsweredQuery%>";break;case _:n.data=e.question,e.relevant?n.template=a.PositiveVoteMessage:n.template=a.NegativeVoteMessage,n.placeholder="<%VoteQuery%>"}n.data&&(t=n.template&&n.placeholder?a.TranscriptMarker+n.template.replace(n.placeholder,n.data):"object"===i(n.data)?a.TranscriptMarker+JSON.stringify(n.data):a.TranscriptMarker+n.data,n.documents&&n.documents.forEach((function(e){t+=" • "+e.question||e.title})),f.command("WebChatService.sendMessage",{message:t}))}(e)):console.log("ChatDeflection is disabled")}function u(t){t.data.html.find(".cx-gkc-question-link").on("mouseup",(function(t){var n=e(this),a=n.attr("data-id"),c=n.attr("data-kbid"),i=n.attr("data-query"),s=n.attr("data-key"),r=n.attr("search-id");if(l({key:s?W:S,docId:a,kbId:c,query:i,question:n.text()}),m.reporting.enabled){var o={};o[m.reporting.deflectionOpenedKey]=JSON.stringify({docId:a,kbId:c}),f.command("WebChatService.updateUserData",o)}p(a,c,i,r),N.docId=a,N.kbId=c}))}function p(c,i,r,o){f.command(A+".getFullContent",{kbId:i,docId:c}).done((function(c){T=e(t(s,{document:c,query:r})),n.populateLanguageStrings(T,a);c.question||c.title;var d=T.find(".cx-kc-article"),u=T.find(".cx-feedback"),g=e('<span class="cx-icon-document-link"></span>');g.html(n.Generate.Icon("outbound")),T.find(".cx-description > a").prepend(g),n.populateIcons(T),T.find(".gkc-doc-link").on("click",(function(){p(this.getAttribute("data-docid"),this.getAttribute("data-kbid"),null)})),d.find(".cx-vote-question a").on("click",(function(t){var n=e(this),s=document.getElementById("relevant"),p=e(".cx-helpful"),g="<span></span>";u.find(".cx-vote-question").addClass("cx-disabled"),u.find(".cx-vote-question a .cx-btn").unwrap().attr("disabled","disabled"),"EITHER"===c.feedbackType&&t.target==s?(p.append(a.ArticleHelpfulnessYes).wrapInner(g),p.append(a.ArticleHelpfulnessYesDesc)):(p.append(a.ArticleHelpfulnessNo).wrapInner(g),p.append(a.ArticleHelpfulnessNoDesc)),b(null,!0),function(e){e.stop().animate({scrollTop:e.get(0).scrollHeight},500)}(d);var x={docId:c.id,kbId:i,searchId:o,query:r||c.question||c.title,relevant:n.data("relevant")};if(f.command(A+".vote",x),l(e.extend({key:_,question:c.question||c.title||r},x)),m.reporting.enabled){var h={};h[m.reporting.deflectionLastFeedbackKey]=n.data("relevant"),f.command("WebChatService.updateUserData",h)}})),T.find(".cx-btn-back").on("click",(function(){f.command("WebChat.hideOverlay"),null===r&&p(N.docId,N.kbId,{})})),function(e,t){f.command("WebChat.showOverlay",{html:t,hideFooter:!0}).done((function(){x(),b(!0)}))}(0,T)}))}function g(){if(m.enabled){f.command("WebChatService.sendCustomNotice",{message:JSON.stringify({key:q,message:c.getWelcomeMessage(a)})}),f.publish("started"),k=!0;var t={};m.reporting.enabled&&(t[m.reporting.deflectionStartedKey]=!0),m.workspace.enabled&&e.extend(t,h),e.isEmptyObject(t)||f.command("WebChatService.updateUserData",t)}else n.log("ChatDeflection is disabled")}function b(e,t){var n=T.find(".cx-scroll-wrapper");n&&(e&&n.animate({scrollTop:0}),t&&n.animate({scrollTop:n[0].scrollHeight},"300","swing"))}function x(){var e=T.find(".cx-button-group").outerHeight(),t=T.outerHeight();T.find(".cx-scroll-wrapper").height(t-e)}var m={enabled:!1,agentTranscript:"readable",workspace:{enabled:!0,sessionKey:"gks_session",languageKey:"gks_lang",countryKey:"Country",questionKey:"gks_question",knowledgeBaseKey:"gks_kbid",customerIdKey:"EmailAddress"},reporting:{enabled:!0,deflectionStartedKey:"gks_deflection_started",deflectionSearchedKey:"gks_deflection_searched",deflectionLastFeedbackKey:"gks_deflection_last_feedback",deflectionOpenedKey:"gks_deflection_document_opened"}},f=CXBus.registerPlugin("ChatDeflection"),h={},k=!1,v=!1,y=!1,w=!1,q="gkc_welcome",C="gkc_search",S="gkc_visit",M="gkc_unanswered",j="gkc_answered",_="gkc_vote",I="gkc_suggested",W="gkc_open",A="KnowledgeCenterService",T=e(),N={};if(f){f.registerEvents(["ready","started","ended","enabled","disabled"]),f.registerCommand("configure",(function(t){if(t&&t.data){if(m=e.extend(!0,{},m,t.data),_genesys.widgets.knowledgecenter.servicePlugin){var n=_genesys.widgets.knowledgecenter.servicePlugin;"string"==typeof n&&(A=n)}t.deferred.resolve()}else t.deferred.reject("Deflection is not configured")})),f.registerCommand("enable",(function(e){m.enabled?e.deferred.reject("Deflection is enabled already"):(m.enabled=!0,f.publish("enabled"),y||!v||w||(g(),k=!0),e.deferred.resolve())})),f.registerCommand("disable",(function(e){m.enabled?(m.enabled=!1,f.publish("disabled"),k=!1,e.deferred.resolve()):e.deferred.reject("Deflection is disabled already")})),f.subscribe(A+".ready",(function(){f.command(A+".sessionInfo").done((function(e){d(e)}))})),f.subscribe(A+".sessionChanged",(function(t){if(d(t.data||{}),k){var n={};e.extend(n,h),e.isEmptyObject(n)||f.command("WebChatService.updateUserData",n)}})),f.subscribe("WebChatService.ready",(function(){f.command("WebChatService.registerPreProcessor",{preprocessor:o})})),f.subscribe("WebChatService.started",(function(){f.command("WebChatService.addPrefilter",{filters:[new RegExp(a.TranscriptMarker),new RegExp(a.SuggestedMarker)]})})),f.subscribe("WebChatService.restored",(function(){f.command("WebChatService.addPrefilter",{filters:[new RegExp(a.TranscriptMarker),new RegExp(a.SuggestedMarker)]})})),f.subscribe("WebChat.messageAdded",(function(e){u(e)})),f.subscribe("WebChatService.clientDisconnected",(function(e){v=!1})),f.subscribe("WebChatService.clientConnected",(function(e){v=!0,!w&&e.data&&e.data.message&&!e.data.message.restoring&&g()})),f.subscribe("WebChatService.messageReceived",(function(e){m.enabled&&(e.data.messages||[]).forEach((function(e){w||"Message"!==e.type||"Client"!==e.from.type||e.restoring||function(e){c.handleCustomerQuery(f,e,m.apiClientMediaType,A).done((function(t){var n=t.query?t.documents.map((function(e){return{id:e.id,kbId:e.kbId,question:e.question||e.title}})):[];if(l({key:C,query:e,searchId:t.searchId,documents:n}),m.reporting.enabled||m.workspace.enabled){var a={};m.reporting.enabled&&((a={})[m.reporting.deflectionSearchedKey]=!0),m.workspace.enabled&&(a[m.workspace.questionKey]=e),f.command("WebChatService.updateUserData",a)}0}))}(e.text)}))}));var D=function(){k&&(f.publish("ended"),k=!1),w=!0};f.subscribe("WebChatService.agentConnected",D),f.subscribe("WebChatService.botConnected",D),f.subscribe("WebChat.closed",(function(){w=!1,k&&(f.publish("ended"),k=!1)})),f.subscribe("App.mobileMode",(function(){e(window).on("orientationchange",x),e(window).on("resize",x)})),f.subscribe("App.i18n",(function(t){"object"==i(t.data.knowledgecenter)&&e.extend(a,t.data.knowledgecenter)})),f.subscribe("App.ready",(function(){f.command("App.registerI18n",{i18n:a,namespace:"knowledgecenter",lang:"en"}).always((function(){_genesys.widgets.knowledgecenter&&f.command("configure",_genesys.widgets.knowledgecenter.deflection),f.ready(),f.republish("ready")}))}))}}.apply(t,a))&&(e.exports=c)},"./webapp/plugins/cx-chat-deflection/html/bubble.html":function(e,t){e.exports='<div style="display: block;" class="cx-message cx-them cx-Agent cx-NewTextBubble">\r\n\r\n    <div class="cx-avatar-wrapper">\r\n        <div class="cx-avatar cx-icon" data-icon="knowledge-center"></div>\r\n    </div>\r\n\r\n    <div class="cx-bubble-arrow">\r\n        <svg height="7" width="7">\r\n            <polygon class="cx-left" points="0,0 7,0 7,7"></polygon>\r\n            <polygon class="cx-right" points="0,0 0,7 7,0"></polygon>\r\n        </svg>\r\n    </div>\r\n\r\n    <div class="cx-bubble">\r\n        <span class="cx-name"><%= name %></span>\r\n        <%=raw reply %>\r\n        <span class="cx-time"><%= time %></span>\r\n    </div>\r\n\r\n</div>'},"./webapp/plugins/cx-chat-deflection/html/deflected-document.html":function(e,t){e.exports='<div class="cx-kc-article-wrapper">\r\n\r\n    <div class="cx-scroll-wrapper">\r\n\r\n        <div class="cx-kc-article">\r\n\r\n            <div class="cx-kc-article-title">\r\n                <div class="cx-icon" data-icon="knowledge-center"></div>\r\n                <div class="cx-question-title"><%=raw document.question || document.title %></div>\r\n            </div>\r\n\r\n            <div class="cx-description">\r\n                <%=raw document.answerContent || document.descriptionContent %>\r\n            </div>\r\n\r\n            <% if (document.attachments && document.attachments.length > 0) { %>\r\n            <div class="cx-attachments">\r\n                <% document.attachments.forEach(function(item) { %>\r\n                <div>\r\n                    <a href="<%= item.url %>" target="_blank">\r\n                        <div class="cx-icon cx-icon-document-attachment cx-theme-icon-interactive1" data-icon="doc-generic-solid"></div><%= item.fileName %>\r\n                    </a>\r\n                </div>\r\n                <% }.bind(this)) %>\r\n            </div>\r\n            <% } %>\r\n\r\n            <% if (document.feedbackType !== \'NONE\') { %>\r\n            <div class="cx-feedback">\r\n\r\n                <% if (query && (document.feedbackType === \'EITHER\' || document.feedbackType === \'VOTE\')) { %>\r\n                <div class="cx-vote-question">\r\n                    <span class="i18n" data-message="FeedbackQuestion"></span>\r\n                    <a href="javascript:;" data-relevant="false"><button class="i18n cx-btn cx-btn-default" type="button" id="irrelevant" data-message="FeedbackDecline"></button></a>\r\n                    <a href="javascript:;" data-relevant="true"><button class="i18n cx-btn cx-btn-primary" type="button" id="relevant" data-message="FeedbackAccept"></button></a>\r\n                </div>\r\n                <% } %>\r\n\r\n                <div class="cx-helpful" aria-live="polite"></div>\r\n            </div>\r\n            <% } %>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class="cx-button-group cx-buttons-binary cx-button-back-container">\r\n        <button class="i18n cx-btn cx-btn-primary cx-btn-back" data-message="Back"></button>\r\n    </div>\r\n</div>\r\n\r\n'},"./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less":function(e,t,n){var a=n("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less");"string"==typeof a&&(a=[[e.i,a,""]]);var c={transform:void 0},i=n("./node_modules/style-loader/lib/addStyles.js")(a,c);a.locals&&(e.exports=a.locals),a.locals||e.hot.accept("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less",(function(){var t=n("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less");"string"==typeof t&&(t=[[e.i,t,""]]),i(t)})),e.hot.dispose((function(){i()}))},"./webapp/plugins/cx-chat-deflection/nls/string.json":function(e,t){e.exports={KnowledgeAgentName:"Knowledge Center",WelcomeMessage:"Hello and welcome! A Live agent will be with you shortly. In the meantime, can I assist you with any questions you may have? Please type a question into the input field below.",SearchResult:"While waiting for an Agent to connect, here are the most relevant answers to your query:",NoDocumentsFound:"I'm sorry. No articles matched your question. Would you like to ask another question?",SuggestedMessage:"The following knowledge item has been suggested:",OpenDocumentHint:"Click on it to view its content.",SuggestedDocumentMessage:"The document '<%DocTitle%>' has been suggested.",Yes:"Yes",No:"No",Back:"Back",FeedbackQuestion:"Was this helpful?",FeedbackAccept:"Yes",FeedbackDecline:"No",ArticleHelpfulnessYes:"Article Helpfulness - 'Yes'",ArticleHelpfulnessYesDesc:"Great! We're very pleased to hear that the article assisted you in your search. Have a great day!",ArticleHelpfulnessNo:"Article Helpfulness - 'No'",ArticleHelpfulnessNoDesc:"We're sorry that the article wasn't a good match for your search. We thank you for your feedback!",TranscriptMarker:"KnowledgeCenter: ",SearchMessage:"Search with query '<%SearchQuery%>'↲",VisitMessage:"Visit for document '<%VisitQuery%>'",OpenMessage:"Viewed '<%OpenQuery%>'",AnsweredMessage:"Results for query '<%AnsweredQuery%>' have been marked as relevant.",UnansweredMessage:"Results for query '<%UnansweredQuery%>' have been marked as unanswered.",PositiveVoteMessage:"Positive voting for document '<%VoteQuery%>'.",NegativeVoteMessage:"Negative voting for document '<%VoteQuery%>'.",SuggestedMarker:"The document[^\\0]*?has been suggested."}}},["./webapp/plugins/cx-chat-deflection/cx-chat-deflection.js"]);